conduct_hostile_espionage = {
	requires_approval = no
	should_notify_third_parties = no
	show_effect_in_tooltip = yes

	unlocking_technologies = {
		tech_geopolitics_1
	}

	potential = {
	
		#THIS is not decentralized
		NOT = { is_country_type = decentralized }
		scope:target_country = { NOT = { is_country_type = decentralized } }
		
		#THIS has intelligence services
		has_law = law_type:law_offensive_espionage
		
		#THIS and Target are not revolutionary
		is_revolutionary = no
		scope:target_country = { is_revolutionary = no } 
		
		#THIS is not broke
		in_default = no
		
		#THIS is of a higher or equal rank than the Target
		OR = { 
			scope:target_country = { country_rank < root.country_rank }
			AND = { 
				country_rank = rank_value:super_power
				scope:target_country = { country_rank = rank_value:super_power }
			}
			AND = { 
				country_rank = rank_value:great_power
				scope:target_country = { country_rank = rank_value:great_power }
			}
			AND = { 
				country_rank = rank_value:major_power
				scope:target_country = { country_rank = rank_value:major_power }
			}
		}
		
		#THIS and Target are not subjects
		is_subject = no
		scope:target_country = { is_subject = no }
		
	}
	
	possible = {

		#THIS is not at war with the Target
		NOT = { has_war_with = scope:target_country }
		
		#THIS is interested in Target
		has_diplomatic_relevance = scope:target_country
		
		#THIS is not friendly with Target in anyway
		NOR = { 
			has_diplomatic_pact = { who = scope:target_country type = increase_relations }
			has_diplomatic_pact = { who = scope:target_country type = bankroll }
			has_diplomatic_pact = { who = scope:target_country type = alliance }
			has_diplomatic_pact = { who = scope:target_country type = defensive_pact } 
		}
		
		#Country wants to meddle in other's affairs
		OR = { 
		
			#Leader is aggressive
			ruler = {
				OR = {
					has_ideology = ideology:ideology_autocratic
					has_ideology = ideology:ideology_power_hungry
					has_ideology = ideology:ideology_elitist
				}
			}
			
			#Target is a rival of THIS
			has_diplomatic_pact = { who = scope:target_country type = rivalry is_initiator = no }
			
		}
		
		#THIS is not friendly with Target
		scope:target_country.relations:root < relations_threshold:cordial
		
	}
	
	pact = {	
		cost = 100
		is_two_sided_pact = no
		infamy_affects_maintenance = no
		
		### Validation requirements ###
		
		is_about_to_auto_break = {
            scope:target_country.relations:root >= relations_threshold:neutral
        }
		
		should_auto_break = {
			
			#THIS is friendly with Target
			scope:target_country.relations:root >= relations_threshold:cordial
			
			#THIS is at war with Target
			has_war_with = scope:target_country
			
			#THIS is friendly with Target in anyway
			OR = { 
				has_diplomatic_pact = { who = scope:target_country type = increase_relations }
				has_diplomatic_pact = { who = scope:target_country type = bankroll }
				has_diplomatic_pact = { who = scope:target_country type = alliance }
				has_diplomatic_pact = { who = scope:target_country type = defensive_pact } 
			}
			
			#Country no longer wants to meddle in other's affairs
			OR = { 
		
				#Leader is aggressive
				ruler = {
					OR = {
						has_ideology = ideology:ideology_autocratic
						has_ideology = ideology:ideology_power_hungry
						has_ideology = ideology:ideology_elitist
					}
				}
			
				#Target is a rival of THIS
				has_diplomatic_pact = { who = scope:target_country type = rivalry is_initiator = no }
			
			}
			
			#THIS is broke
			in_default = yes
			
		}
		
		should_invalidate = {
		
			#THIS no longer has intelligence services
			NOT = { has_law = law_type:law_offensive_espionage }
		
			#THIS has lost interest in Target
			NOT = { has_diplomatic_relevance = scope:target_country }
			
			#THIS is not of a higher or equal rank than the Target
			NOR = {
				scope:target_country = { country_rank < root.country_rank }
				AND = { 
					country_rank = rank_value:super_power
					scope:target_country = { country_rank = rank_value:super_power }
				}
				AND = { 
					country_rank = rank_value:great_power
					scope:target_country = { country_rank = rank_value:great_power }
				}
				AND = { 
					country_rank = rank_value:major_power
					scope:target_country = { country_rank = rank_value:major_power }
				}
			}
			
		}
		
		### Effects ###
		
		weekly_effect = {
			
			## Chance for an Espionage Opportunity to appear ##
			
			#Instigate Domestic Unrest (<1% chance per week) [ONLY possible if country has an open media]
			if = {
				limit = { 
					scope:target_country = { country_has_an_open_media = yes } 
				}
				if = {
					limit = { scope:target_country = { has_law = law_type:law_secret_police } }
					custom_tooltip = {
						text = instigate_domestic_unrest_tt
						random_list = { 
							199 = { }
							1 = { root = { trigger_event = { id = espionage_system.1 } } }
						}
					}
				}
				else = {
					custom_tooltip = {
						text = instigate_domestic_unrest_2_tt
						random_list = { 
							198 = { }
							2 = { root = { trigger_event = { id = espionage_system.1 } } }
						}
					}
				}
				
			}
			
			#Conduct Economic Sabotage
			if = {
				limit = { scope:target_country = { has_law = law_type:law_secret_police } }
				custom_tooltip = {
					text = espionage_conduct_economic_sabotage_tt
					random_list = { 
						199 = { }
						1 = { root = { trigger_event = { id = espionage_system.3 } } }
					}
				}
			}
			else = {
				custom_tooltip = {
					text = espionage_conduct_economic_sabotage_2_tt
					random_list = { 
						198 = { }
						2 = { root = { trigger_event = { id = espionage_system.3 } } }
					}
				}
			}
			
			#Instigate Secessionist Movement
			if = {
				limit = { scope:target_country = { has_law = law_type:law_secret_police } }
				custom_tooltip = {
					text = espionage_instigate_secessionist_movement_tt
					random_list = { 
						199 = { }
						1 = { root = { trigger_event = { id = espionage_system.5 } } }
					}
				}
			}
			else = {
				custom_tooltip = {
					text = espionage_instigate_secessionist_movement_2_tt
					random_list = { 
						198 = { }
						2 = { root = { trigger_event = { id = espionage_system.5 } } }
					}
				}
			}
			
			#Election Interference (50% chance per election) [ONLY possible if country has a ruling party & is having elections]
			if = {
				limit = { 
					scope:target_country = { 
						ruler.interest_group = {
							has_party = yes
						}
						in_election_campaign = yes
					} 
				}
				if = {
					limit = { scope:target_country = { has_law = law_type:law_secret_police } }
					custom_tooltip = {
						text = election_interference_tt
						random_list = { 
							56 = { }
							1 = { root = { trigger_event = { id = espionage_system.7 } } }
						}
					}
				}
				else = {
					custom_tooltip = {
						text = election_interference_2_tt
						random_list = { 
							28 = { }
							1 = { root = { trigger_event = { id = espionage_system.7 } } }
						}
					}
				}
				
			}
			
		} 
		
	}
	
	ai = {
	
		propose_score = {
			value = 10
		}
		
		will_propose = {
			OR = { 
				has_attitude = {
					who = scope:target_country
					attitude <= antagonistic
				}
				has_diplomatic_pact = { who = scope:target_country type = rivalry }
				scope:target_country.relations:root < relations_threshold:poor
			}
		}
		
		will_break = {
			NOR = { 
				has_diplomatic_pact = { who = scope:target_country type = rivalry }
				scope:target_country.relations:root < relations_threshold:poor
				scope:target_country.infamy >= infamy_threshold:pariah
			}
			NOR = { 
				has_attitude = {
					who = scope:target_country
					attitude <= antagonistic
				}
				has_diplomatic_pact = { who = scope:target_country type = rivalry }
				scope:target_country.relations:root < relations_threshold:poor
			}
		}
		
	}
	
}