calculate_climate_change_progress = {

	#Calculate annual global warming rate
	if = {
		limit = { global_country_ranking = 1 }
		set_global_variable = { 
			name = climate_change_severity_raw
			value = 0 
		}
		set_global_variable = { 
			name = climate_change_severity_states
			value = 0 
		}
		every_state = {
			limit = { 
				state_region = { pollution_amount > 10 }
				owner = { has_law = law_type:law_no_environment_law } 
			}
			owner = {
				change_global_variable = { 
					name = climate_change_severity_raw
					add = 4
				}
				change_global_variable = { 
					name = climate_change_severity_states
					add = 1
				}
			}
		}
		set_global_variable = { 
			name = climate_change_progress
			value = global_var:climate_change_severity_raw
		}
		change_global_variable = { 
			name = climate_change_progress
			divide = global_var:climate_change_severity_states
		}
	}
	
	#Progress climate change
	if = {
		limit = { global_var:climate_change_progress > 3 }
		
	}
	
	#Display
	set_variable = {
		name = climate_change_progress_display
		value = global_var:climate_change_progress
	}

}