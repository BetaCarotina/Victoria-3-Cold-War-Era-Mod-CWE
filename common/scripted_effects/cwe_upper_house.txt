calculate_upper_house_composition = {

	#Calculate upper_house size
	set_variable = {
		name = upper_house_size_var
		value = 0
	}
	every_scope_state = {
		limit = { is_incorporated = yes }
		owner = { 
			change_variable = {
				name = upper_house_size_var
				add = 1
			}
		}
	}

	#Calculate pro-government senators
	set_variable = {
		name = pro_government_senators_var
		value = 0
	}
	if = {
		limit = { 
			ig:ig_industrialists = { is_in_government = yes } 
		}
		ig:ig_industrialists = { save_scope_as = ig_industrialists_scope_ig } 
		if = {
			limit = { has_law = law_type:law_democratic_legislature }
			every_scope_state = {
				limit = { 
					is_incorporated = yes
					ig_state_pol_strength_share = {
						target = scope:ig_industrialists_scope_ig
						value > 0.20
					}
				}
				owner = { 
					change_variable = {
						name = pro_government_senators_var
						add = 1
					}
				}
			}
		}
		if = {
			limit = { has_law = law_type:law_technocratic_legislature }
			every_scope_state = {
				limit = { 
					is_incorporated = yes
					ig_state_pol_strength_share = {
						target = scope:ig_industrialists_scope_ig
						value > 0.10
					}
				}
				owner = { 
					change_variable = {
						name = pro_government_senators_var
						add = 1
					}
				}
			}
		}
	}
	if = {
		limit = { 
			ig:ig_petty_bourgeoisie = { is_in_government = yes } 
		}
		ig:ig_petty_bourgeoisie = { save_scope_as = ig_petty_bourgeoisie_scope_ig } 
		if = {
			limit = { has_law = law_type:law_democratic_legislature }
			every_scope_state = {
				limit = { 
					is_incorporated = yes
					ig_state_pol_strength_share = {
						target = scope:ig_petty_bourgeoisie_scope_ig
						value > 0.20
					}
				}
				owner = { 
					change_variable = {
						name = pro_government_senators_var
						add = 1
					}
				}
			}
		}
		if = {
			limit = { has_law = law_type:law_technocratic_legislature }
			every_scope_state = {
				limit = { 
					is_incorporated = yes
					ig_state_pol_strength_share = {
						target = scope:ig_petty_bourgeoisie_scope_ig
						value > 0.10
					}
				}
				owner = { 
					change_variable = {
						name = pro_government_senators_var
						add = 1
					}
				}
			}
		}
	}
	if = {
		limit = { 
			ig:ig_trade_unions = { is_in_government = yes } 
		}
		ig:ig_trade_unions = { save_scope_as = ig_trade_unions_scope_ig } 
		if = {
			limit = { has_law = law_type:law_democratic_legislature }
			every_scope_state = {
				limit = { 
					is_incorporated = yes
					ig_state_pol_strength_share = {
						target = scope:ig_trade_unions_scope_ig
						value > 0.50
					}
				}
				owner = { 
					change_variable = {
						name = pro_government_senators_var
						add = 1
					}
				}
			}
		}
		if = {
			limit = { has_law = law_type:law_technocratic_legislature }
			every_scope_state = {
				limit = { 
					is_incorporated = yes
					ig_state_pol_strength_share = {
						target = scope:ig_trade_unions_scope_ig
						value > 0.25
					}
				}
				owner = { 
					change_variable = {
						name = pro_government_senators_var
						add = 1
					}
				}
			}
		}
	}

}